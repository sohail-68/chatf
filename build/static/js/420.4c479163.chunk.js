"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[420],{420:(e,t,s)=>{s.r(t),s.d(t,{default:()=>n});var o=s(791),l=s(409),a=s(689),r=s(85),i=(s(462),s(184));const n=()=>{var e,t;const[s,n]=(0,o.useState)(""),[d,c]=(0,o.useState)("normal"),[u,m]=(0,o.useState)(""),[p,g]=(0,o.useState)(!1),[b,f]=(0,o.useState)(null),x=(0,a.TH)(),h=(0,a.s0)();(0,o.useEffect)((()=>{var e;if(null!==(e=x.state)&&void 0!==e&&e.post){const{caption:e,image:t,mood:s}=x.state.post;n(e),c(s),m(t)}}),[x.state]);return(0,i.jsxs)("div",{className:"bg-black",children:[(0,i.jsx)("div",{className:"flex justify-center min-h-screen items-center bg-gradient-to-br from-[#6B73FF] via-[#ddd6f3] to-[#faaca8] px-4 sm:px-8 lg:px-16 xl:px-32",children:(0,i.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),g(!0);try{var t;if(null!==(t=x.state)&&void 0!==t&&t.post){const e=await(0,l.I8)(x.state.post._id,{caption:s,image:u,mood:d});r.Am.success("Post updated successfully!"),setTimeout((()=>{h("/")}),3e3),console.log("Post updated:",e)}else{const e=await(0,l.qb)({caption:s,image:u,mood:d});console.log(e),r.Am.success("Post created successfully!"),console.log("Post created:",e)}}catch(o){r.Am.error("An error occurred while submitting the post."),console.error("Error submitting post:",o)}finally{g(!1)}},className:"w-full max-w-lg bg-white p-8 rounded-xl shadow-lg space-y-6 border border-gray-300",children:[(0,i.jsx)("h2",{className:"text-3xl font-bold text-center text-gray-800",children:null!==(e=x.state)&&void 0!==e&&e.post?"Edit Post":"Create a New Post"}),(0,i.jsx)("div",{className:"mb-4",children:(0,i.jsx)("input",{type:"text",placeholder:"Write a caption...",value:s,onChange:e=>n(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800 text-lg"})}),(0,i.jsx)("label",{htmlFor:"mood",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Select Mood:"}),(0,i.jsxs)("select",{id:"mood",className:"mb-4 p-2 border border-gray-300 rounded-md w-full",onChange:e=>c(e.target.value),value:d,children:[(0,i.jsx)("option",{value:"Normal",children:"Normal"}),(0,i.jsx)("option",{value:"Sad",children:"Sad"}),(0,i.jsx)("option",{value:"Happy",children:"Happy"})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("label",{htmlFor:"file-upload",className:"block text-gray-600 mb-2 cursor-pointer",children:"Upload an image"}),(0,i.jsx)("input",{id:"file-upload",type:"file",onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onloadend=()=>{m(e.result),f(e.result)},e.readAsDataURL(t)}},className:"w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 cursor-pointer"})]}),b&&(0,i.jsx)("img",{src:b,alt:"Preview",className:"w-40 h-40 object-cover rounded-full border shadow"}),(0,i.jsx)("button",{type:"submit",className:"w-full py-3 px-6 bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition duration-300 ease-in-out "+(p?"bg-gray-400 cursor-not-allowed":""),disabled:p,children:p?"Submitting...":null!==(t=x.state)&&void 0!==t&&t.post?"Update Post":"Create Post"})]})}),(0,i.jsx)(r.Ix,{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"colored"})]})}},409:(e,t,s)=>{s.d(t,{I8:()=>n,L0:()=>c,T6:()=>a,n9:()=>d,qb:()=>i,v6:()=>r});var o=s(903);s(612);const l=o.Z.create({baseURL:"https://chatb-vrft.onrender.com/api"});l.interceptors.request.use((e=>(sessionStorage.getItem("token")&&(e.headers.Authorization=sessionStorage.getItem("token")),e)));const a=()=>l.get("/all"),r=e=>l.delete(`/delete/${e}`),i=e=>l.post("/addpost",e),n=(e,t)=>l.put(`/edit/${e}`,t),d=e=>l.post(`${e}/like`),c=(e,t)=>l.post(`${e}/comment`,t)},462:()=>{}}]);
//# sourceMappingURL=420.4c479163.chunk.js.map