{"version":3,"file":"static/js/420.4c479163.chunk.js","mappings":"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","sources":["components/CreatePost.jsx","services/api.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { createPost, Edit } from \"../services/api\";\r\nimport { ImagetoBase64 } from \"../utility/ImagetoBase64.js\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport { toast, ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nconst CreatePost = () => {\r\n  const [caption, setCaption] = useState(\"\");\r\n  const [mood, setMood] = useState(\"normal\");\r\n  const [image, setImage] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const[imgpr,setPreviewImage]=useState(null)\r\n  \r\n  const location = useLocation();\r\nconst navigate=useNavigate()\r\n  // Initialize form fields for edit mode\r\n  useEffect(() => {\r\n    if (location.state?.post) {\r\n      const { caption, image, mood } = location.state.post;\r\n      setCaption(caption);\r\n      setMood(mood);\r\n      setImage(image);\r\n    }\r\n  }, [location.state]);\r\n\r\n  const handleImageChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => {\r\n        setImage(reader.result);   \r\n        setPreviewImage(reader.result); // base64 string\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n  \r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    try {\r\n      if (location.state?.post) {\r\n        // Update existing post\r\n        const data = await Edit(location.state.post._id, {\r\n          caption,\r\n          image,\r\n          mood,\r\n        });\r\n        toast.success(\"Post updated successfully!\");\r\n\r\n        setTimeout(() => {\r\n        navigate(\"/\")\r\n          \r\n        }, 3000);\r\n        console.log(\"Post updated:\", data);\r\n      } else {\r\n        // Create a new post\r\n        const data = await createPost({ caption, image, mood });\r\n        console.log(data);\r\n        \r\n        toast.success(\"Post created successfully!\");\r\n        console.log(\"Post created:\", data);\r\n      }\r\n    } catch (error) {\r\n      toast.error(\"An error occurred while submitting the post.\");\r\n      console.error(\"Error submitting post:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const moods = {\r\n    normal: \"üòê\",\r\n    happy: \"üòä\",\r\n    sad: \"üò¢\",\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-black\">\r\n      <div className=\"flex justify-center min-h-screen items-center bg-gradient-to-br from-[#6B73FF] via-[#ddd6f3] to-[#faaca8] px-4 sm:px-8 lg:px-16 xl:px-32\">\r\n        <form\r\n          onSubmit={handleSubmit}\r\n          className=\"w-full max-w-lg bg-white p-8 rounded-xl shadow-lg space-y-6 border border-gray-300\"\r\n        >\r\n          <h2 className=\"text-3xl font-bold text-center text-gray-800\">\r\n            {location.state?.post ? \"Edit Post\" : \"Create a New Post\"}\r\n          </h2>\r\n\r\n          {/* Caption Input */}\r\n          <div className=\"mb-4\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Write a caption...\"\r\n              value={caption}\r\n              onChange={(e) => setCaption(e.target.value)}\r\n              className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800 text-lg\"\r\n            />\r\n          </div>\r\n\r\n          {/* Mood Selector */}\r\n          <label\r\n            htmlFor=\"mood\"\r\n            className=\"block text-sm font-semibold text-gray-700 mb-2\"\r\n          >\r\n            Select Mood:\r\n          </label>\r\n          <select\r\n            id=\"mood\"\r\n            className=\"mb-4 p-2 border border-gray-300 rounded-md w-full\"\r\n            onChange={(e) => setMood(e.target.value)}\r\n            value={mood}\r\n          >\r\n            <option value=\"Normal\">Normal</option>\r\n            <option value=\"Sad\">Sad</option>\r\n            <option value=\"Happy\">Happy</option>\r\n          </select>\r\n\r\n          {/* Image Input */}\r\n          <div className=\"mb-6\">\r\n            <label\r\n              htmlFor=\"file-upload\"\r\n              className=\"block text-gray-600 mb-2 cursor-pointer\"\r\n            >\r\n              Upload an image\r\n            </label>\r\n            <input\r\n              id=\"file-upload\"\r\n              type=\"file\"\r\n              onChange={handleImageChange}\r\n              className=\"w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 cursor-pointer\"\r\n            />\r\n          </div>\r\n\r\n          {/* Image Preview */}\r\n          {imgpr && (\r\n    <img\r\n      src={imgpr}\r\n      alt=\"Preview\"\r\n      className=\"w-40 h-40 object-cover rounded-full border shadow\"\r\n    />\r\n  )}\r\n\r\n          {/* Submit Button */}\r\n          <button\r\n            type=\"submit\"\r\n            className={`w-full py-3 px-6 bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition duration-300 ease-in-out ${\r\n              loading ? \"bg-gray-400 cursor-not-allowed\" : \"\"\r\n            }`}\r\n            disabled={loading}\r\n          >\r\n            {loading\r\n              ? \"Submitting...\"\r\n              : location.state?.post\r\n              ? \"Update Post\"\r\n              : \"Create Post\"}\r\n          </button>\r\n        </form>\r\n      </div>\r\n\r\n      {/* Toast Notifications */}\r\n      <ToastContainer\r\n        position=\"top-right\"\r\n        autoClose={2000}\r\n        hideProgressBar={false}\r\n        closeOnClick\r\n        pauseOnHover\r\n        draggable\r\n        theme=\"colored\"\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreatePost;\r\n","// src/services/api.js\r\nimport axios from 'axios';\r\nimport { io } from 'socket.io-client';\r\n\r\nconst API = axios.create({ baseURL: 'https://chatb-vrft.onrender.com/api' });\r\n\r\n// Attach the token for authorization\r\nAPI.interceptors.request.use((req) => {\r\n  if (sessionStorage\r\n.getItem('token')) {\r\n    req.headers.Authorization =sessionStorage\r\n.getItem('token');\r\n  }\r\n  return req;\r\n});\r\n\r\n// Auth API\r\nexport const login = (formData) => API.post('/auth/login', formData);\r\nexport const register = (formData) => API.post('/auth/register', formData);\r\n\r\n// Post API\r\nexport const fetchPosts = () => API.get('/all');\r\nexport const Del = (id) => API.delete(`/delete/${id}`);\r\nexport const createPost = (postData) => API.post('/addpost', postData);\r\nexport const Edit = (id,postData) => API.put(`/edit/${id}`, postData);\r\nexport const likePost = (id) => API.post(`${id}/like`);\r\nexport const commentOnPost = (id, commentData) => API.post(`${id}/comment`,commentData);\r\nexport const fetchComments = (id) => API.get(`/posts/${id}/comments`);\r\n// src/services/api.js\r\n\r\nlet socket;\r\nexport const connectSocket = () => {\r\n  if (!socket) {\r\n    socket = io('http://localhost:5000'); // Connect to server\r\n  }\r\n  return socket;\r\n};\r\n\r\nexport const disconnectSocket = () => {\r\n  if (socket) socket.disconnect();\r\n};\r\n\r\nexport const sendMessage = (msg) => {\r\n  if (socket) socket.emit('chatMessage', msg);\r\n};\r\n\r\nexport const onMessageReceived = (callback) => {\r\n  if (socket) socket.on('chatMessage', callback);\r\n};\r\nexport const fetchBookmarks = async () => {\r\n  try {\r\n    const response = await axios.get(\r\n      \"https://chatb-vrft.onrender.com/api/auth/bookmarked\",\r\n      {\r\n        headers: { Authorization: localStorage\r\n.getItem(\"token\") },\r\n      }\r\n    );\r\n    return response.data.bookmarks; // Return bookmarks to caller\r\n  } catch (error) {\r\n    console.error(\"Failed to fetch bookmarks\", error);\r\n    throw error; // Re-throw the error for the caller to handle\r\n  }\r\n};\r\nexport const loadBookmarks=async()=>{\r\n  \r\n}\r\n\r\n// Function to delete all bookmarks\r\n"],"names":["caption","setCaption","useState","mood","setMood","image","setImage","loading","setLoading","imgpr","setPreviewImage","location","useLocation","navigate","useNavigate","useEffect","state","post","className","onSubmit","async","e","preventDefault","data","Edit","_id","toast","setTimeout","console","log","createPost","error","type","placeholder","value","onChange","target","htmlFor","id","file","files","reader","FileReader","onloadend","result","readAsDataURL","src","alt","disabled","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","theme","API","axios","baseURL","interceptors","request","use","req","sessionStorage","getItem","headers","Authorization","fetchPosts","get","Del","delete","postData","put","likePost","commentOnPost","commentData"],"sourceRoot":""}