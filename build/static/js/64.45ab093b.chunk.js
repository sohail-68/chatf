/*! For license information please see 64.45ab093b.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[64],{64:(e,s,t)=>{t.r(s),t.d(s,{default:()=>m});var a=t(903),l=t(791),r=t(689),o=t(612),i=t(322),c=t(85);const n=(0,t(100).Z)("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);var d=t(262),h=t(892),x=(t(462),t(184));const m=()=>{const{messages:e,setSocket:s,socket:t,suggestedUsers:m,fetchSuggestedUsers:g,setMessages:u}=(0,i.m)(),p=(0,r.TH)(),f=(0,r.UO)();console.log(f,"ppp");const v=sessionStorage.getItem("userid"),j=(0,r.s0)(),[b,w]=(0,l.useState)(""),[y,N]=(0,l.useState)(null),[k,S]=(0,l.useState)([]),[Z,z]=(0,l.useState)(!1),C=sessionStorage.getItem("token"),[$,M]=(0,l.useState)(null);(0,l.useEffect)((()=>{var e;null!==(e=p.state)&&void 0!==e&&e.isFollowing&&w(p.state.isFollowing)}),[p.state]);console.log(C);console.log(b),console.log(y);const A=async()=>{try{const e=await a.Z.get(`https://chatb-vrft.onrender.com
/api/auth/userpro/${f.id}`,{headers:{Authorization:`${C}`}});N(e.data)}catch(e){console.error("Error fetching user profile:",e)}};console.log("da",y);if(console.log("pos",k),(0,l.useEffect)((()=>{A(),(async()=>{try{const e=await a.Z.get(`https://chatb-vrft.onrender.com
/api/count/${f.id}`,{headers:{Authorization:C}});M(e.data.postCount),S(e.data.postdata)}catch(e){console.error("Error fetching post count:",e)}})();const e=(0,o.io)("https://chatb-vrft.onrender.com
");s(e),e.emit("joinRoom",v),e.on("receiveMessage",(e=>{u((s=>[...s,e]))}))}),[]),!y)return(0,x.jsx)("div",{children:"Loading..."});return(0,x.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[(0,x.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,x.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden mb-8",children:[(0,x.jsx)("div",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 h-32"}),(0,x.jsxs)("div",{className:"relative px-8 pb-8",children:[(0,x.jsx)("div",{className:"absolute -top-16 left-8",children:(0,x.jsx)("div",{className:"w-32 h-32 rounded-full border-4 border-white shadow-xl overflow-hidden bg-white",children:(0,x.jsx)("img",{src:y.profilePicture,alt:"Profile",className:"w-full h-full object-cover"})})}),(0,x.jsxs)("div",{className:"pt-20 flex flex-col lg:flex-row md:items-center md:justify-between",children:[(0,x.jsxs)("div",{className:"mb-6 md:mb-0",children:[(0,x.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:y.username}),(0,x.jsx)("p",{className:"text-gray-600 text-lg mb-4 max-w-md",children:y.bio}),(0,x.jsxs)("div",{className:"flex space-x-8",children:[(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:$}),(0,x.jsx)("div",{className:"text-sm text-gray-500 uppercase tracking-wide",children:"Posts"})]}),(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:y.followers.length}),(0,x.jsx)("div",{className:"text-sm text-gray-500 uppercase tracking-wide",children:"Followers"})]}),(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:y.following.length}),(0,x.jsx)("div",{className:"text-sm text-gray-500 uppercase tracking-wide",children:"Following"})]})]})]}),(0,x.jsxs)("div",{className:"flex gap-3 mt-2",children:[" "," ",(0,x.jsxs)("button",{onClick:async()=>{try{const e=await a.Z.post(`https://chatb-vrft.onrender.com
/api/auth/follow/${f.id}`,{},{headers:{Authorization:`${C}`}});w(e.data.message),A(),g()}catch(e){console.error("Failed to toggle follow status:",e)}},className:"px-5 py-2 rounded-lg font-semibold shadow-sm transition "+(y.followers.includes(sessionStorage.getItem("userid"))?"bg-gray-400 text-white hover:bg-gray-500":"bg-blue-500 text-white hover:bg-blue-600"),children:[" ",y.followers.includes(sessionStorage.getItem("userid"))?"Unfollow":"Follow"," "]})," "," ",!y.followers.includes(sessionStorage.getItem("userid"))&&(0,x.jsx)("button",{onClick:async()=>{try{const e=await a.Z.post(`https://chatb-vrft.onrender.com
/api/auth/follow-request/${f.id}`,{},{headers:{Authorization:`${C}`}});console.log(e),c.Am.success(e.data.message),A()}catch(e){console.error("Failed to toggle follow status:",e)}},className:"px-5 py-2 rounded-lg font-semibold bg-yellow-500 text-white hover:bg-yellow-600 shadow-sm transition",children:" Request "})," "," ",y.followers.includes(sessionStorage.getItem("userid"))&&(0,x.jsxs)("button",{onClick:()=>{return e=p.state?p.state.post.user._id:f.id,void j(`/message/${e}`);var e},className:"px-5 py-2 rounded-lg font-semibold bg-green-500 text-white hover:bg-green-600 shadow-sm transition",children:[" Message ",e.length>0&&`(${e.length})`," "]})," "]})]})]})]}),(0,x.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[(0,x.jsx)("div",{className:"px-8 py-6 border-b border-gray-100",children:(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)(n,{size:24,className:"text-gray-600"}),(0,x.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Posts"})]})}),(0,x.jsx)("div",{className:"p-8",children:k.length>0?(0,x.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k.map(((e,s)=>(0,x.jsxs)("div",{className:"group relative bg-white rounded-2xl shadow-lg overflow-hidden transition-all duration-300 hover:shadow-2xl hover:-translate-y-2",children:[(0,x.jsx)("div",{className:"aspect-square overflow-hidden",children:(0,x.jsx)("img",{src:e.image,alt:"Post",className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"})}),(0,x.jsx)("div",{className:"",children:(0,x.jsx)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300 text-white text-center",children:(0,x.jsxs)("div",{className:"flex items-center justify-center space-x-4",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,x.jsx)(d.Z,{size:20,fill:"currentColor"}),(0,x.jsx)("span",{className:"font-semibold",children:e.likes.length})]}),(0,x.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,x.jsx)(h.Z,{size:20}),(0,x.jsx)("span",{className:"font-semibold",children:"0"})]})]})})}),(0,x.jsxs)("div",{className:"p-4",children:[(0,x.jsx)("p",{className:"text-gray-700 text-sm leading-relaxed",children:e.caption}),(0,x.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,x.jsx)(d.Z,{size:18,className:"transition-colors cursor-pointer "+(e.likes.length>0?"text-red-500 fill-current":"text-gray-400 hover:text-red-400")}),(0,x.jsx)("span",{className:"text-sm text-gray-500",children:e.likes.length})]}),(0,x.jsx)(h.Z,{size:18,className:"text-gray-400 hover:text-blue-500 cursor-pointer transition-colors"})]})]})]},s)))}):(0,x.jsxs)("div",{className:"text-center py-16",children:[(0,x.jsx)("div",{className:"w-24 h-24 mx-auto mb-6 bg-gray-100 rounded-full flex items-center justify-center",children:(0,x.jsx)(n,{size:32,className:"text-gray-400"})}),(0,x.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No posts yet"}),(0,x.jsx)("p",{className:"text-gray-500",children:"When this user shares photos, they'll appear here."})]})})]})]}),(0,x.jsx)(c.Ix,{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"colored"})]})}},262:(e,s,t)=>{t.d(s,{Z:()=>a});const a=(0,t(100).Z)("heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},462:()=>{}}]);
//# sourceMappingURL=64.45ab093b.chunk.js.map