"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[809],{809:(e,s,t)=>{t.r(s),t.d(s,{default:()=>i});var l=t(791),a=t(903),r=t(601),n=t(184);const i=()=>{const[e,s]=(0,l.useState)([]),[t,i]=(0,l.useState)([]),[c,d]=(0,l.useState)(!0),o=sessionStorage.getItem("token"),h=async()=>{try{const e=await a.Z.get("https://chatb-vrft.onrender.com/api/auth/users/follow-requests",{headers:{Authorization:`${o}`}});s(e.data.followRequests||[])}catch(l){var e,t;console.error("Error fetching follow requests:",(null===(e=l.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||l.message)}finally{d(!1)}},m=async(e,t)=>{try{const l=await a.Z.post("https://chatb-vrft.onrender.com/api/auth/users/follow-request/respond",{requesterId:e,action:t},{headers:{Authorization:`${o}`}});alert(l.data.message),"approve"===t?(s((s=>s.filter((s=>s._id!==e)))),i((e=>[...e,l.data.user]))):h()}catch(n){var l,r;console.error((null===(l=n.response)||void 0===l||null===(r=l.data)||void 0===r?void 0:r.message)||"Something went wrong")}};return(0,l.useEffect)((()=>{h()}),[]),(0,n.jsx)("div",{className:"min-h-screen flex  justify-center bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:(0,n.jsx)("div",{className:"max-w-7xl mt-5 w-full mx-auto px-4",children:(0,n.jsxs)("div",{className:"bg-white shadow-2xl rounded-3xl overflow-hidden",children:[(0,n.jsx)("div",{className:"px-8 py-6 bg-gradient-to-r from-blue-600 to-indigo-600",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:(0,n.jsx)(r.Z,{className:"w-6 h-6 text-white"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Follow Requests"}),(0,n.jsxs)("p",{className:"text-blue-100 text-sm",children:[e.length," pending request",1!==e.length?"s":""]})]})]}),e.length>0&&(0,n.jsx)("div",{className:"bg-white/20 px-4 py-2 rounded-full",children:(0,n.jsx)("span",{className:"text-white font-semibold text-sm",children:e.length})})]})}),(0,n.jsxs)("div",{className:"p-8",children:[e.length>0&&(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Pending Requests"}),e.map((e=>(0,n.jsxs)("div",{className:"flex justify-between items-center p-4 border rounded-xl",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("img",{src:e.profilePicture,alt:e.username,className:"w-12 h-12 rounded-full"}),(0,n.jsx)("span",{className:"font-semibold",children:e.username})]}),(0,n.jsxs)("div",{className:"flex gap-3",children:[(0,n.jsx)("button",{onClick:()=>m(e._id,"approve"),className:"px-4 py-2 bg-green-500 text-white rounded-lg",children:"Accept"}),(0,n.jsx)("button",{onClick:()=>m(e._id,"reject"),className:"px-4 py-2 bg-red-500 text-white rounded-lg",children:"Decline"})]})]},e._id)))]}),t.length>0&&(0,n.jsxs)("div",{className:"space-y-4 mt-8",children:[(0,n.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Follow Back"}),t.map((e=>(0,n.jsxs)("div",{className:"flex justify-between items-center p-4 border rounded-xl",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("img",{src:e.profilePicture,alt:e.username,className:"w-12 h-12 rounded-full"}),(0,n.jsx)("span",{className:"font-semibold",children:e.username})]}),(0,n.jsx)("button",{onClick:()=>(async e=>{try{const s=await a.Z.post(`https://chatb-vrft.onrender.com/api/auth/follow-back/${e}`,{},{headers:{Authorization:`${o}`}});alert(s.data.message),i((s=>s.filter((s=>s._id!==e))))}catch(s){console.error("Follow back error:",s)}})(e._id),className:"px-4 py-2 bg-blue-500 text-white rounded-lg",children:"Follow Back"})]},e._id)))]})]})]})})})}}}]);
//# sourceMappingURL=809.0cfe8bd4.chunk.js.map