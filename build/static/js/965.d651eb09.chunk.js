"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[965],{965:(e,s,t)=>{t.r(s),t.d(s,{default:()=>l});var i=t(791),n=t(903),a=t(184);const l=()=>{const[e,s]=(0,i.useState)([]),[t,l]=(0,i.useState)(!0),[o,c]=(0,i.useState)(null),[r,d]=(0,i.useState)([]);if((0,i.useEffect)((()=>{(async()=>{try{const e=await n.Z.get("https://chatb-vrft.onrender.com/api/notification",{headers:{Authorization:`${sessionStorage.getItem("token")}`}});s(e.data),console.log(e);const t=e.data.map((e=>e.image));console.log(t);const i=e.data.map((e=>e.image)).filter(Boolean);d(i)}catch(e){c("Error fetching notifications")}finally{l(!1)}})()}),[]),console.log(e),console.log(r),t)return(0,a.jsx)("p",{children:"Loading notifications..."});if(o)return(0,a.jsx)("p",{children:o});const m=sessionStorage.getItem("userid"),u=e.filter((e=>e.likes.some((e=>e.user!==m))));return console.log(e),(0,a.jsxs)("div",{className:"notifications bg-white p-4 h-screen justify-center rounded-lg shadow-md max-w-md ",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Notifications"}),0===u.length?(0,a.jsx)("p",{children:"No notifications"}):(0,a.jsx)("ul",{children:u.map((e=>{var s,t,i,n;return(0,a.jsx)("li",{className:"notification-item mb-4",children:(0,a.jsxs)("div",{className:"flex space-x-4 items-start",children:[(0,a.jsx)("div",{className:"flex flex-col space-y-2",children:e.likes.map(((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("img",{src:e.user.profilePicture,alt:e.user.username||"User",className:"w-10 h-10 rounded-full object-cover"}),(0,a.jsx)("span",{className:"text-sm",children:e.user.username||"Unknown User"})]},s)))}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"text-sm text-gray-800",children:(0,a.jsx)("span",{className:"ml-1 text-gray-600",children:(null===(s=e.likes)||void 0===s?void 0:s.length)>0&&(null===(t=e.comments)||void 0===t?void 0:t.length)>0?"liked and commented on your post":(null===(i=e.likes)||void 0===i?void 0:i.length)>0?"liked your post":(null===(n=e.comments)||void 0===n?void 0:n.length)>0?"commented on your post":"posted an update"})}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"2h ago"})]}),e.image&&(0,a.jsx)("div",{children:(0,a.jsx)("img",{src:e.image,alt:"Notification related",className:"w-16 h-16 object-cover rounded-md"})})]})},e._id)}))})]})}}}]);
//# sourceMappingURL=965.d651eb09.chunk.js.map