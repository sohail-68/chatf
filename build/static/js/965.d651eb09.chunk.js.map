{"version":3,"file":"static/js/965.d651eb09.chunk.js","mappings":"2JAGA,MA8GA,EA9GsB,KACpB,MAAOA,EAAeC,IAAoBC,EAAAA,EAAAA,UAAS,KAC5CC,EAASC,IAAcF,EAAAA,EAAAA,WAAS,IAChCG,EAAOC,IAAYJ,EAAAA,EAAAA,UAAS,OAC5BK,EAAKC,IAAUN,EAAAA,EAAAA,UAAS,IAgC/B,IA9BAO,EAAAA,EAAAA,YAAU,KACmBC,WACzB,IACE,MAAMC,QAAiBC,EAAAA,EAAAA,IAAU,mDAAoD,CACnFC,QAAS,CAAEC,cAAgB,GAAEC,eAAeC,QAAQ,cAEtDf,EAAiBU,EAASM,MAC1BC,QAAQC,IAAIR,GAEZ,MAAMS,EAAUT,EAASM,KAAKI,KAAKC,GAAOA,EAAKC,QAC/CL,QAAQC,IAAIC,GAGb,MAAMI,EAASb,EAASM,KACvBI,KAAIC,GAAQA,EAAKC,QACjBE,OAAOC,SAGVlB,EAAOgB,EAKN,CAJE,MAAOG,GACPrB,EAAS,+BACX,CAAC,QACCF,GAAW,EACb,GAEFwB,EAAoB,GACnB,IACLV,QAAQC,IAAInB,GACZkB,QAAQC,IAAIZ,GAENJ,EAAS,OAAO,uBAAG,6BACvB,GAAIE,EAAO,OAAO,uBAAIA,IAGtB,MAAMwB,EAAgBd,eAAeC,QAAQ,UAGvCc,EAAwB9B,EAAcyB,QAAOM,GACjDA,EAAaC,MAAMC,MAAKC,GAAQA,EAAKC,OAASN,MAMhD,OAFFX,QAAQC,IAAInB,IAGR,iBAAKoC,UAAU,oFAAmF,WAChG,eAAIA,UAAU,yBAAwB,SAAC,kBACL,IAAjCN,EAAsBO,QACrB,uBAAG,sBAEH,wBACCP,EAAsBT,KAAKU,IAAY,mBAC9C,eAA2BK,UAAU,yBAAwB,UAC3D,iBAAKA,UAAU,6BAA4B,WAEzC,gBAAKA,UAAU,0BAAyB,SACrCL,EAAaC,MAAMX,KAAI,CAACc,EAAMG,KAC7B,iBAAiBF,UAAU,8BAA6B,WACtD,gBACEG,IAAKJ,EAAKA,KAAKK,eACfC,IAAKN,EAAKA,KAAKO,UAAY,OAC3BN,UAAU,yCAEZ,iBAAMA,UAAU,UAAS,SAAED,EAAKA,KAAKO,UAAY,mBANzCJ,QAYd,iBAAKF,UAAU,SAAQ,WACrB,gBAAKA,UAAU,wBAAuB,UACpC,iBAAMA,UAAU,qBAAoB,UACf,QAAlB,EAAAL,EAAaC,aAAK,aAAlB,EAAoBK,QAAS,IAA0B,QAArB,EAAAN,EAAaY,gBAAQ,aAArB,EAAuBN,QAAS,EAC/D,oCACkB,QAAlB,EAAAN,EAAaC,aAAK,aAAlB,EAAoBK,QAAS,EAC7B,mBACqB,QAArB,EAAAN,EAAaY,gBAAQ,aAArB,EAAuBN,QAAS,EAChC,yBACA,wBAGR,cAAGD,UAAU,6BAA4B,SAAC,cAI3CL,EAAaR,QACZ,0BACE,gBACEgB,IAAKR,EAAaR,MAClBkB,IAAI,uBACJL,UAAU,4CAtCXL,EAAaa,IA2CjB,QAKG,C","sources":["components/Notification.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst Notifications = () => {\r\n  const [notifications, setNotifications] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [img, setimg] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const fetchNotifications = async () => {\r\n      try {\r\n        const response = await axios.get(\"https://chatb-vrft.onrender.com
/api/notification\", {\r\n          headers: { Authorization: `${sessionStorage.getItem('token')}` }\r\n        });\r\n        setNotifications(response.data);\r\n        console.log(response);\r\n        \r\n        const setimages=response.data.map((item)=>item.image)\r\n        console.log(setimages);\r\n        \r\n       // Step 1: Extract all image strings\r\n       const images = response.data\r\n       .map(item => item.image) // extract image\r\n       .filter(Boolean); // remove null/undefined if any\r\n\r\n     // Step 2: Save to img state\r\n     setimg(images); \r\n      } catch (err) {\r\n        setError('Error fetching notifications');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchNotifications();\r\n  }, []);\r\nconsole.log(notifications);\r\nconsole.log(img);\r\n\r\n  if (loading) return <p>Loading notifications...</p>;\r\n  if (error) return <p>{error}</p>;\r\n\r\n  // Assuming current user ID is stored in session storage\r\n  const currentUserId = sessionStorage.getItem(\"userid\");\r\n\r\n  // Filter notifications to only include those with likes from other users\r\n  const filteredNotifications = notifications.filter(notification => \r\n    notification.likes.some(like => like.user !== currentUserId)\r\n  );\r\n //filteredNotifications);\r\n  \r\nconsole.log(notifications);\r\n\r\n  return (\r\n    <div className=\"notifications bg-white p-4 h-screen justify-center rounded-lg shadow-md max-w-md \">\r\n      <h3 className=\"text-lg font-bold mb-4\">Notifications</h3>\r\n      {filteredNotifications.length === 0 ? (\r\n        <p>No notifications</p>\r\n      ) : (\r\n        <ul>\r\n        {filteredNotifications.map((notification) => (\r\n  <li key={notification._id} className=\"notification-item mb-4\">\r\n    <div className=\"flex space-x-4 items-start\">\r\n      {/* Left Column: Users who liked/commented (stacked vertically) */}\r\n      <div className=\"flex flex-col space-y-2\">\r\n        {notification.likes.map((user, index) => (\r\n          <div key={index} className=\"flex items-center space-x-2\">\r\n            <img\r\n              src={user.user.profilePicture}\r\n              alt={user.user.username || \"User\"}\r\n              className=\"w-10 h-10 rounded-full object-cover\"\r\n            />\r\n            <span className=\"text-sm\">{user.user.username || \"Unknown User\"}</span>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Middle Column: Notification Text */}\r\n      <div className=\"flex-1\">\r\n        <div className=\"text-sm text-gray-800\">\r\n          <span className=\"ml-1 text-gray-600\">\r\n            {notification.likes?.length > 0 && notification.comments?.length > 0\r\n              ? \"liked and commented on your post\"\r\n              : notification.likes?.length > 0\r\n              ? \"liked your post\"\r\n              : notification.comments?.length > 0\r\n              ? \"commented on your post\"\r\n              : \"posted an update\"}\r\n          </span>\r\n        </div>\r\n        <p className=\"text-xs text-gray-500 mt-1\">2h ago</p>\r\n      </div>\r\n\r\n      {/* Right Column: Notification Image */}\r\n      {notification.image && (\r\n        <div>\r\n          <img\r\n            src={notification.image}\r\n            alt=\"Notification related\"\r\n            className=\"w-16 h-16 object-cover rounded-md\"\r\n          />\r\n        </div>\r\n      )}\r\n    </div>\r\n  </li>\r\n))}\r\n\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Notifications;\r\n"],"names":["notifications","setNotifications","useState","loading","setLoading","error","setError","img","setimg","useEffect","async","response","axios","headers","Authorization","sessionStorage","getItem","data","console","log","setimages","map","item","image","images","filter","Boolean","err","fetchNotifications","currentUserId","filteredNotifications","notification","likes","some","like","user","className","length","index","src","profilePicture","alt","username","comments","_id"],"sourceRoot":""}